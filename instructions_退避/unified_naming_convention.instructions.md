# ğŸ¯ UniRigçµ±ä¸€ãƒ•ã‚¡ã‚¤ãƒ«å‘½åè¦å‰‡ - ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸­å¿ƒè¨­è¨ˆ

## ğŸ“‹ åŸºæœ¬åŸå‰‡

### ğŸ¨ ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“æœ€å„ªå…ˆ
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœŸå¾…: 
3Dãƒ¢ãƒ‡ãƒ« â†’ [1ã‚¯ãƒªãƒƒã‚¯] â†’ ãƒªã‚®ãƒ³ã‚°æ¸ˆã¿FBX

ä¸è¦ãªè¤‡é›‘ã•:
- åˆ†é›¢ã•ã‚ŒãŸéª¨ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã‚¹ã‚­ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«  
- äºˆæ¸¬å›°é›£ãªä¸­é–“ãƒ•ã‚¡ã‚¤ãƒ«å
- æŠ€è¡“çš„åˆ¶ç´„ã«ã‚ˆã‚‹ä¸æ•´åˆ
```

### ğŸ“„ çµ±ä¸€å‘½åè¦å‰‡ï¼ˆ2025å¹´6æœˆæ”¹è¨‚ç‰ˆï¼‰

#### ğŸ”¤ åŸºæœ¬ãƒ•ã‚¡ã‚¤ãƒ«å‘½åãƒ‘ã‚¿ãƒ¼ãƒ³
```
å…¥åŠ›: {model_name}.glb (ä¾‹: bird.glb)
â””â”€â”€ å„ã‚¹ãƒ†ãƒƒãƒ—å‡ºåŠ›:
    â”œâ”€â”€ Step1: {model_name}_mesh.npz        (bird_mesh.npz)
    â”œâ”€â”€ Step2: {model_name}_skeleton.fbx    (bird_skeleton.fbx)
    â”‚          {model_name}_skeleton.npz    (bird_skeleton.npz)
    â”œâ”€â”€ Step3: {model_name}_skinned.fbx     (bird_skinned.fbx)
    â”‚          {model_name}_skinning.npz    (bird_skinning.npz)
    â”œâ”€â”€ Step4: {model_name}_merged.fbx      (bird_merged.fbx)
    â””â”€â”€ Step5: {model_name}_rigged.fbx      (bird_rigged.fbx) â† æœ€çµ‚æˆæœç‰©
```

#### ğŸ¯ ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘æœ€çµ‚æˆæœç‰©
```
æœ€é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«: {model_name}_rigged.fbx
- UVåº§æ¨™å®Œå…¨è»¢é€æ¸ˆã¿
- ãƒãƒ†ãƒªã‚¢ãƒ«ãƒ»ãƒ†ã‚¯ã‚¹ãƒãƒ£çµ±åˆæ¸ˆã¿  
- ã‚¹ã‚±ãƒ«ãƒˆãƒ³ãƒ»ã‚¹ã‚­ãƒ³ã‚¦ã‚§ã‚¤ãƒˆé©ç”¨æ¸ˆã¿
- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½çŠ¶æ…‹
```

## ğŸ”§ æŠ€è¡“å®Ÿè£…ä»•æ§˜

### ğŸ“ å›ºå®šãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
```
/app/pipeline_work/{model_name}/
â”œâ”€â”€ 00_asset_preservation/     # Step0: å…ƒãƒ‡ãƒ¼ã‚¿ä¿å­˜
â”œâ”€â”€ 01_extracted_mesh/         # Step1: ãƒ¡ãƒƒã‚·ãƒ¥æŠ½å‡º
â”‚   â””â”€â”€ {model_name}_mesh.npz
â”œâ”€â”€ 02_skeleton/               # Step2: ã‚¹ã‚±ãƒ«ãƒˆãƒ³ç”Ÿæˆ
â”‚   â”œâ”€â”€ {model_name}_skeleton.fbx
â”‚   â””â”€â”€ {model_name}_skeleton.npz
â”œâ”€â”€ 03_skinning/               # Step3: ã‚¹ã‚­ãƒ‹ãƒ³ã‚°é©ç”¨
â”‚   â”œâ”€â”€ {model_name}_skinned.fbx
â”‚   â””â”€â”€ {model_name}_skinning.npz
â”œâ”€â”€ 04_merge/                  # Step4: éª¨ãƒ»ã‚¹ã‚­ãƒ³çµ±åˆ
â”‚   â””â”€â”€ {model_name}_merged.fbx
â””â”€â”€ 05_blender_integration/    # Step5: æœ€çµ‚æˆæœç‰©
    â””â”€â”€ {model_name}_rigged.fbx â† ã“ã‚ŒãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ±‚ã‚ã‚‹æˆæœç‰©
```

### ğŸ” æºæµå‡¦ç†çµ±åˆè¦ä»¶

#### Config YAMLçµ±ä¸€ä»•æ§˜
```yaml
# ã‚¹ã‚±ãƒ«ãƒˆãƒ³ç”Ÿæˆè¨­å®š
writer:
  export_npz: predict_skeleton    # å›ºå®šå: ã‚¹ã‚±ãƒ«ãƒˆãƒ³ãƒ‡ãƒ¼ã‚¿
  export_fbx: skeleton_model      # å›ºå®šå: ã‚¹ã‚±ãƒ«ãƒˆãƒ³FBX

# ã‚¹ã‚­ãƒ‹ãƒ³ã‚°è¨­å®š  
writer:
  export_npz: predict_skin        # å›ºå®šå: ã‚¹ã‚­ãƒ³ãƒ‡ãƒ¼ã‚¿
  export_fbx: skinned_model       # å›ºå®šå: ã‚¹ã‚­ãƒ³é©ç”¨FBX
```

#### Shell Scriptçµ±ä¸€å‘¼ã³å‡ºã—
```bash
# çµ±ä¸€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¸¡ã—
generate_skeleton.sh "$input_file" "$output_dir" "$model_name"
generate_skin.sh "$mesh_file" "$skeleton_dir" "$output_dir" "$model_name"
merge.sh "$skeleton_fbx" "$skinned_fbx" "$output_dir" "$model_name"
```

## ğŸ¨ ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“è¨­è¨ˆ

### âœ… ç†æƒ³çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼
```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼: 3Dãƒ¢ãƒ‡ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
2. ã‚·ã‚¹ãƒ†ãƒ : [Processing...] é€²æ—è¡¨ç¤º
3. ã‚·ã‚¹ãƒ†ãƒ : "{model_name}_rigged.fbx ready for download!"
4. ãƒ¦ãƒ¼ã‚¶ãƒ¼: ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ â†’ å³åº§ã«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚½ãƒ•ãƒˆã§åˆ©ç”¨å¯èƒ½
```

### ğŸš« é¿ã‘ã‚‹ã¹ãè¤‡é›‘ã•
```
âŒ åˆ†é›¢ãƒ•ã‚¡ã‚¤ãƒ«ã®å€‹åˆ¥æä¾›:
   - "skeleton.fbx", "skinned.fbx"ã‚’åˆ¥ã€…ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ‰‹å‹•ã§ãƒãƒ¼ã‚¸ä½œæ¥­

âŒ æŠ€è¡“çš„ãƒ•ã‚¡ã‚¤ãƒ«åã®éœ²å‡º:
   - "predict_skeleton.npz", "raw_data.npz"
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¯ç„¡é–¢ä¿‚ãªä¸­é–“ãƒ•ã‚¡ã‚¤ãƒ«

âŒ ä¸ä¸€è‡´ãªãƒ•ã‚¡ã‚¤ãƒ«å:
   - åŒã˜å‡¦ç†ã§ç•°ãªã‚‹å‘½åè¦å‰‡
   - ãƒ‡ãƒãƒƒã‚°å›°é›£ã€è‡ªå‹•åŒ–é˜»å®³
```

## ğŸ”§ å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ğŸ“‹ Config YAMLä¿®æ­£äº‹é …
- [ ] `quick_inference_skeleton_articulationxl_ar_256.yaml`: çµ±ä¸€å‘½åé©ç”¨
- [ ] `quick_inference_unirig_skin.yaml`: é‡è¤‡å®šç¾©é™¤å»ã€çµ±ä¸€å‘½åé©ç”¨
- [ ] `quick_inference.yaml`: åŸºæœ¬è¨­å®šç¢ºèª

### ğŸ“‹ Shell Scriptä¿®æ­£äº‹é …  
- [ ] `extract.sh`: çµ±ä¸€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å¯¾å¿œ
- [ ] `generate_skeleton.sh`: çµ±ä¸€å‡ºåŠ›åå¯¾å¿œ
- [ ] `generate_skin.sh`: çµ±ä¸€å…¥å‡ºåŠ›åå¯¾å¿œ
- [ ] `merge.sh`: çµ±ä¸€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ»å‡ºåŠ›åå¯¾å¿œ

### ğŸ“‹ Python Moduleä¿®æ­£äº‹é …
- [ ] `src/data/extract.py`: çµ±ä¸€å‡ºåŠ›åå¯¾å¿œ
- [ ] `run.py`: configèª­ã¿è¾¼ã¿çµ±ä¸€å¯¾å¿œ
- [ ] `src/inference/merge.py`: çµ±ä¸€å…¥å‡ºåŠ›å¯¾å¿œ

### ğŸ“‹ Step Moduleçµ±åˆäº‹é …
- [ ] å…¨Step Module: çµ±ä¸€å‘½åè¦å‰‡æº–æ‹ 
- [ ] å…¨Step Module: å›ºå®šãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ æº–æ‹ 
- [ ] å…¨Step Module: æºæµå‡¦ç†ã¨ã®æ•´åˆæ€§ç¢ºèª

## ğŸš¨ é‡è¦ãªè¨­è¨ˆåŸå‰‡

### ğŸ¯ ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸­å¿ƒä¸»ç¾©
```
æŠ€è¡“çš„åˆ¶ç´„ < ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“
è¤‡é›‘ãªå†…éƒ¨å‡¦ç† = ã‚·ãƒ³ãƒ—ãƒ«ãªå¤–éƒ¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
åˆ†é›¢ã•ã‚ŒãŸä¸­é–“æˆæœç‰© = çµ±åˆã•ã‚ŒãŸæœ€çµ‚æˆæœç‰©
```

### ğŸ”’ ä¸€è²«æ€§ä¿è¨¼
```
åŒã˜å…¥åŠ› = åŒã˜å‘½åè¦å‰‡ã®å‡ºåŠ›
ãƒ‡ãƒãƒƒã‚°å¯èƒ½ = äºˆæ¸¬å¯èƒ½ãªãƒ•ã‚¡ã‚¤ãƒ«é…ç½®
æ‹¡å¼µå¯èƒ½ = çµ±ä¸€ã•ã‚ŒãŸã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
```

### ğŸ›¡ï¸ å …ç‰¢æ€§ç¢ºä¿
```
ãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ãƒã‚§ãƒƒã‚¯ = ã‚·ãƒ³ãƒ—ãƒ«ãªçŠ¶æ…‹ç®¡ç†
ã‚¨ãƒ©ãƒ¼å‡¦ç† = æ˜ç¢ºãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
å›å¾©å‡¦ç† = ä¸­é–“çŠ¶æ…‹ã‹ã‚‰ã®å†å®Ÿè¡Œå¯èƒ½
```

---

**ã“ã®å‘½åè¦å‰‡ã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯æŠ€è¡“çš„ãªè¤‡é›‘ã•ã‚’æ„è­˜ã™ã‚‹ã“ã¨ãªãã€é«˜å“è³ªãª3Dãƒªã‚®ãƒ³ã‚°æˆæœç‰©ã‚’ç¢ºå®Ÿã«å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚**
