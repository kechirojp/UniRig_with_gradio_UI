# UniRig Gradio WebUI フォーク

これは[UniRig](https://github.com/VAST-AI-Research/UniRig)リポジトリの完全なGradio Webインターフェース実装を含むプライベートフォークです。3Dモデルリギング自動化のためのWebUIを提供します。

## 🎯 フォークの目的

**バージョン管理専用のプライベートリポジトリ**  
- 🔒 **プライベートリポジトリ**: 公開配布は行いません
- 📦 **バージョン管理**: 開発進捗と変更履歴の追跡
- 🚀 **機能拡張**: フルパイプライン Gradio Webインターフェース
- 🔧 **開発環境**: Dockerベースのコンテナ化デプロイメント

## ✨ 追加機能

### 🖥️ 完全なGradio Webインターフェース
- **フルパイプライン自動化**: GLB/FBXからリグ済みFBXまでワンクリック処理
- **個別ステージ処理**: メッシュ抽出、スケルトン生成、スキニング、モデルマージ
- **リアルタイム進捗表示**: マルチステージ進捗インジケーター
- **インタラクティブ3Dビューワー**: 各処理段階でのモデルプレビュー
- **ダウンロード管理**: 全ての中間ファイルと最終ファイルへのアクセス

### 🐳 本番運用対応デプロイメント
- **Dockerコンテナ**: CUDA 12.1 + Blender 4.2 環境
- **自動セットアップ**: 完全な依存関係管理
- **最適化パフォーマンス**: GPU加速AI処理
- **Blender統合**: FBX/GLB変換パイプライン

### 🔧 強化された処理パイプライン
- **エラーハンドリング**: 堅牢な障害回復とログ記録
- **ファイル管理**: 整理されたワークスペースと一時ファイルクリーンアップ
- **設定システム**: YAMLベース設定管理
- **テストスイート**: 包括的な検証と確認

## 📋 元のUniRig情報

**ベースリポジトリ**: [VAST-AI-Research/UniRig](https://github.com/VAST-AI-Research/UniRig)  
**論文**: [One Model to Rig Them All: Diverse Skeleton Rigging with UniRig](https://arxiv.org/abs/2504.12451)  
**ライセンス**: MIT License  

### 元の機能
- ✅ **自動スケルトン生成**: AI駆動スケルトン構造予測
- ✅ **自動スキニング**: 頂点単位ウェイト予測
- 🎯 **統合フレームワーク**: 多様なモデルカテゴリ（人間、動物、オブジェクト）に対応
- 🏆 **最先端技術**: 困難なデータセットで高精度を実現

## 🚀 クイックスタート

### 前提条件
- GPU対応Docker
- NVIDIA Container Toolkit
- Git LFS

### アプリケーション実行
```bash
# コンテナのビルドと実行
docker build -t unirig-gradio .
docker run --gpus all -p 7860:7860 -v $(pwd):/app unirig-gradio

# Gradioインターフェースの起動
python app.py
```

### Webインターフェースへのアクセス
- ブラウザを開く: `http://localhost:7860`
- 3Dモデルをアップロード（GLB/FBX）
- 性別パラメータを選択
- 完全自動化のため「フルパイプライン実行」をクリック

## 📁 リポジトリ構造

```
/app/
├── app.py                 # メインGradioアプリケーション
├── Dockerfile            # コンテナ設定
├── requirements.txt      # Python依存関係
├── configs/              # 設定ファイル
├── src/                  # UniRigコア実装
├── blender/             # Blender統合スクリプト
├── examples/            # サンプル3Dモデル
└── docs/                # ドキュメント
```

## 🔄 開発状況

**現在のバージョン**: 完全に機能するWebインターフェース  
**パイプライン状況**: 完全自動化が動作中  
**テスト**: 包括的な検証が完了  
**パフォーマンス**: 本番使用に最適化済み  

## 📝 バージョン履歴

このフォークは以下の詳細なバージョン管理を維持します：
- Gradioインターフェース開発反復
- パイプライン最適化改善
- バグ修正と安定性向上
- パフォーマンスチューニングと最適化

## ⚠️ 重要な注意事項

- **プライベート使用のみ**: このリポジトリは公開配布を意図していません
- **教育目的**: 学習と開発バージョン管理のため
- **元の功績**: 全てのコアAI機能は元のUniRig作者に帰属します
- **MITライセンス**: 元のライセンス条項を尊重します

## 🤝 元の作者への感謝

**UniRigフレームワーク**: 清華大学と[Tripo](https://www.tripo3d.ai)により開発  
**研究チーム**: VAST-AI-Research  
**出版**: SIGGRAPH'25 (TOG)

## 🎯 技術仕様

### システム要件
- **OS**: Ubuntu 22.04 LTS
- **GPU**: NVIDIA GPU (CUDA 12.1対応)
- **RAM**: 8GB以上推奨
- **ディスク**: 20GB以上の空き容量

### 対応ファイル形式
- **入力**: GLB, FBX, OBJ
- **出力**: FBX (リグ済み), GLB (プレビュー用)
- **中間ファイル**: NPZ, TXT

### 処理時間目安
- **小型モデル** (～5K頂点): 約30秒
- **中型モデル** (5K-15K頂点): 約1-2分
- **大型モデル** (15K+頂点): 約3-5分

## 🔍 機能詳細

### フルパイプライン処理
1. **メッシュ抽出** (0-25%): 3Dモデルの頂点・面情報抽出
2. **スケルトン生成** (25-50%): AI駆動によるボーン構造予測
3. **スキニング処理** (50-75%): 頂点ウェイト自動計算
4. **モデルマージ** (75-100%): 元モデルとリグの統合

### 個別ステージ処理
- 各ステージを独立して実行可能
- 中間ファイルのダウンロードとプレビュー
- エラー時の部分的成功状態保持

### プレビュー機能
- 各ステージでの3Dモデル表示
- スケルトン構造の可視化
- スキニングウェイトの確認

## 🛠️ 開発者向け情報

### カスタマイズポイント
- **設定ファイル**: `configs/app_config.yaml`
- **UI設定**: `app.py`内のGradioコンポーネント
- **処理パラメータ**: 各ステージの設定ファイル

### デバッグ機能
- 詳細ログ出力
- 中間ファイル保存
- エラートレースバック
- GPU使用状況監視

### 拡張性
- 新しい3Dファイル形式の追加
- カスタム処理ステップの挿入
- 外部API連携
- バッチ処理機能

---

*これは学習とバージョン管理目的の開発フォークです。公式リリースと更新については元のリポジトリを参照してください。*
