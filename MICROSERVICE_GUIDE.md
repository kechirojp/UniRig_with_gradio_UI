# UniRig ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åŒ– å®Ÿè£…ã‚¬ã‚¤ãƒ‰

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

UniRigãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åŒ–ã¨ã¯ã€**åŒä¸€ã‚¢ãƒ—ãƒªå†…ã§ç‹¬ç«‹ã—ãŸå®Ÿè¡Œæ©Ÿèƒ½ã‚’æŒã¤æ§‹é€ **ã§ã™ï¼š

```
app.py (UI + ãƒ‡ãƒ¼ã‚¿å—ã‘æ¸¡ã—)
â”œâ”€â”€ Step1Module (ç‹¬ç«‹å®Ÿè¡Œæ©Ÿèƒ½) - ãƒ¡ãƒƒã‚·ãƒ¥æŠ½å‡º
â”œâ”€â”€ Step2Module (ç‹¬ç«‹å®Ÿè¡Œæ©Ÿèƒ½) - ã‚¹ã‚±ãƒ«ãƒˆãƒ³ç”Ÿæˆ  
â”œâ”€â”€ Step3Module (ç‹¬ç«‹å®Ÿè¡Œæ©Ÿèƒ½) - ã‚¹ã‚­ãƒ‹ãƒ³ã‚°é©ç”¨
â””â”€â”€ Step4Module (ç‹¬ç«‹å®Ÿè¡Œæ©Ÿèƒ½) - ãƒ†ã‚¯ã‚¹ãƒãƒ£çµ±åˆ

ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼: app.py â†’ Step1 â†’ app.py â†’ Step2 â†’ app.py â†’ Step3 â†’ app.py â†’ Step4 â†’ app.py
```

## ğŸ“‹ ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åŒ–ã®åŸºæœ¬åŸå‰‡

### ğŸ¯ app.py ã®è²¬å‹™
- **UIè¡¨ç¤º**: Gradioã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- **ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†**: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ»çŠ¶æ…‹ç®¡ç†
- **ãƒ‡ãƒ¼ã‚¿å—ã‘æ¸¡ã—**: å„ã‚¹ãƒ†ãƒƒãƒ—é–“ã®ãƒ‡ãƒ¼ã‚¿æ©‹æ¸¡ã—
- **é€²è¡Œç®¡ç†**: ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å…¨ä½“ã®é€²è¡Œåˆ¶å¾¡

### ğŸ”§ Step Modules ã®è²¬å‹™
å„ã‚¹ãƒ†ãƒƒãƒ—ã¯ç‹¬ç«‹ã—ãŸå®Ÿè¡Œæ©Ÿèƒ½ã¨ã—ã¦è¨­è¨ˆï¼š

#### ğŸ“¦ Step 1 Module - ãƒ¡ãƒƒã‚·ãƒ¥æŠ½å‡º
- **è²¬å‹™**: 3Dãƒ¢ãƒ‡ãƒ«ã‹ã‚‰ãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡º
- **å…¥åŠ›**: 3Dãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ (.glb, .fbx, .objç­‰)
- **å‡ºåŠ›**: ãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ (.npz)
- **ç‹¬ç«‹æ€§**: ä»–ã‚¹ãƒ†ãƒƒãƒ—ã®å®Ÿè¡Œç’°å¢ƒã‚’æ±šã•ãªã„
- **å®Ÿè£…å ´æ‰€**: `src/data/extract.py`
- **å†…éƒ¨å‡¦ç†**: ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€å…ƒã€… `launch/inference/extract.sh` ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã‚ˆã£ã¦å®Ÿè¡Œã•ã‚Œã¦ã„ãŸå‡¦ç†ã‚’Pythoné–¢æ•°ã¨ã—ã¦ã‚«ãƒ—ã‚»ãƒ«åŒ–ã—ã¾ã™ã€‚`extract.sh` ã¯å†…éƒ¨ã§ `python -m src.data.extract` ã‚³ãƒãƒ³ãƒ‰ã‚’å‘¼ã³å‡ºã—ã€å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã€å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ (`configs/data/quick_inference.yaml` ãªã©)ã€ç›®æ¨™ãƒãƒªã‚´ãƒ³æ•°ãªã©ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã—ã¦ãƒ¡ãƒƒã‚·ãƒ¥æŠ½å‡ºå‡¦ç†ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

#### ğŸ¦´ Step 2 Module - ã‚¹ã‚±ãƒ«ãƒˆãƒ³ç”Ÿæˆ
- **è²¬å‹™**: AIã«ã‚ˆã‚‹ã‚¹ã‚±ãƒ«ãƒˆãƒ³æ§‹é€ ã®ç”Ÿæˆ
- **å…¥åŠ›**: ãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ (.npz), æ€§åˆ¥è¨­å®š
- **å‡ºåŠ›**: ã‚¹ã‚±ãƒ«ãƒˆãƒ³FBXãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹, ã‚¹ã‚±ãƒ«ãƒˆãƒ³ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ (.npz)
- **ç‹¬ç«‹æ€§**: ãƒ¡ãƒƒã‚·ãƒ¥æŠ½å‡ºã¨ã¯ç‹¬ç«‹ã—ã¦å®Ÿè¡Œ
- **å®Ÿè£…å ´æ‰€**: UniRigã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ å‘¼ã³å‡ºã—
- **å†…éƒ¨å‡¦ç†**: ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€`launch/inference/generate_skeleton.sh` ã®å‡¦ç†ã‚’ã‚«ãƒ—ã‚»ãƒ«åŒ–ã—ã¾ã™ã€‚ã“ã®ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯2æ®µéšã®å‡¦ç†ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
    1.  **ãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿æº–å‚™**: ã¾ãš `python -m src.data.extract` ã‚’å‘¼ã³å‡ºã—ã€å…¥åŠ›3Dãƒ¢ãƒ‡ãƒ«ã‹ã‚‰ã‚¹ã‚±ãƒ«ãƒˆãƒ³ç”Ÿæˆã«å¿…è¦ãªä¸­é–“ãƒ‡ãƒ¼ã‚¿ (`raw_data.npz`) ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ã“ã®éš›ã€`--config` ã§æŒ‡å®šã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿è¨­å®šã¨ã€`--output_dir` ã§æŒ‡å®šã•ã‚ŒãŸä¸­é–“ãƒ‡ãƒ¼ã‚¿ä¿å­˜å ´æ‰€ãŒé‡è¦ã«ãªã‚Šã¾ã™ã€‚
    2.  **ã‚¹ã‚±ãƒ«ãƒˆãƒ³æ¨è«–**: æ¬¡ã« `python run.py` ã‚’å‘¼ã³å‡ºã—ã€æº–å‚™ã•ã‚ŒãŸä¸­é–“ãƒ‡ãƒ¼ã‚¿ã¨ `--task` ã§æŒ‡å®šã•ã‚ŒãŸã‚¹ã‚±ãƒ«ãƒˆãƒ³ç”Ÿæˆã‚¿ã‚¹ã‚¯è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆä¾‹: `configs/task/quick_inference_skeleton_articulationxl_ar_256.yaml`ï¼‰ã«åŸºã¥ã„ã¦ã‚¹ã‚±ãƒ«ãƒˆãƒ³ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ç”Ÿæˆã•ã‚ŒãŸã‚¹ã‚±ãƒ«ãƒˆãƒ³ã¯FBXå½¢å¼ã¨NPZå½¢å¼ã§å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚

#### ğŸ­ Step 3 Module - ã‚¹ã‚­ãƒ‹ãƒ³ã‚°é©ç”¨
- **ç›®çš„**: ãƒ¡ãƒƒã‚·ãƒ¥ã¨ã‚¹ã‚±ãƒ«ãƒˆãƒ³ã®ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆã‚¹ã‚­ãƒ‹ãƒ³ã‚°ï¼‰
- **å…¥åŠ›**: ãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã€ã‚¹ã‚±ãƒ«ãƒˆãƒ³FBXãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ï¼ˆä¾‹ï¼‰
- **å‡ºåŠ›**: ãƒªã‚°æ¸ˆã¿FBXãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã€ã‚¹ã‚­ãƒ‹ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ï¼ˆ.npzï¼‰ï¼ˆä¾‹ï¼‰
- **ç‹¬ç«‹æ€§**: å‰ã®ã‚¹ãƒ†ãƒ¼ã‚¸ã®çµæœã®ã¿ã‚’ä½¿ç”¨ã—ã€ç’°å¢ƒæ±šæŸ“ãªã—
- **å†…éƒ¨å‡¦ç†**: ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ `launch/inference/generate_skin.sh` ã®æ©Ÿèƒ½ã‚’ã‚«ãƒ—ã‚»ãƒ«åŒ–ã—ã¾ã™ã€‚ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ã€ã¾ãš `launch/inference/extract.sh` ã‚’å‘¼ã³å‡ºã—ã¦ãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ã‚’æº–å‚™ã—ï¼ˆã‚¹ã‚±ãƒ«ãƒˆãƒ³ç”Ÿæˆã¨åŒæ§˜ï¼‰ã€æ¬¡ã« `python run.py` ã‚’ã‚¿ã‚¹ã‚¯å›ºæœ‰ã®è¨­å®šï¼ˆä¾‹: `--task=configs/task/quick_inference_unirig_skin.yaml`ï¼‰ã§å‘¼ã³å‡ºã—ã¦ã‚¹ã‚­ãƒ‹ãƒ³ã‚°ã‚’é©ç”¨ã—ã¾ã™ã€‚å…¥åŠ›ã¨ã—ã¦ã€å…ƒã®ãƒ¢ãƒ‡ãƒ«ã€å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã€ãŠã‚ˆã³ã‚¹ã‚±ãƒ«ãƒˆãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆä¾‹: `dataset_inference_clean`ï¼‰ã‚’å–ã‚Šã¾ã™ã€‚

#### ğŸ¨ Step 4 Module - ãƒ†ã‚¯ã‚¹ãƒãƒ£çµ±åˆ
- **ç›®çš„**: ã‚ªãƒªã‚¸ãƒŠãƒ«ã®ãƒ†ã‚¯ã‚¹ãƒãƒ£çµ±åˆã¨æœ€çµ‚å‡ºåŠ›
- **å…¥åŠ›**: ãƒªã‚°æ¸ˆã¿FBXãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã€ã‚ªãƒªã‚¸ãƒŠãƒ«ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ï¼ˆä¾‹ï¼‰
- **å‡ºåŠ›**: æœ€çµ‚FBXãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ï¼ˆãƒ†ã‚¯ã‚¹ãƒãƒ£ä»˜ãï¼‰ï¼ˆä¾‹ï¼‰
- **ç‹¬ç«‹æ€§**: ãƒ†ã‚¯ã‚¹ãƒãƒ£å‡¦ç†ã®ã¿ã«ç„¦ç‚¹ã‚’å½“ã¦ã€ä»–ã®æ©Ÿèƒ½ã¨ã®å¹²æ¸‰ãªã—
- **å†…éƒ¨å‡¦ç†**: ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ `launch/inference/merge.sh` ã®æ©Ÿèƒ½ã‚’ã‚«ãƒ—ã‚»ãƒ«åŒ–ã—ã¾ã™ã€‚ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ `python -m src.inference.merge` ã‚’å‘¼ã³å‡ºã—ã€ã‚½ãƒ¼ã‚¹ï¼ˆã‚ªãƒªã‚¸ãƒŠãƒ«ãƒ¢ãƒ‡ãƒ«ï¼‰ã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆï¼ˆã‚¹ã‚­ãƒ‹ãƒ³ã‚°æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«ï¼‰ã€å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ãªã©ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã—ã¾ã™ã€‚

## ğŸ”§ å†…éƒ¨API ä»•æ§˜

### ãƒ‡ãƒ¼ã‚¿å—ã‘æ¸¡ã—ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
```python
# å…±é€šãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼
def step_function(input_data: dict) -> tuple[bool, str, dict]:
    """
    Args:
        input_data: å…¥åŠ›ãƒ‡ãƒ¼ã‚¿è¾æ›¸
    
    Returns:
        success: æˆåŠŸãƒ•ãƒ©ã‚°
        logs: å®Ÿè¡Œãƒ­ã‚°
        output_files: å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«è¾æ›¸
    """
```

### Step 1 Interface
```python
def extract_mesh(input_file: str, model_name: str) -> tuple[bool, str, dict]:
    """
    Args:
        input_file: 3Dãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹
        model_name: ãƒ¢ãƒ‡ãƒ«å
    
    Returns:
        success: True/False
        logs: "ãƒ¡ãƒƒã‚·ãƒ¥æŠ½å‡ºå®Œäº†: /path/to/extracted.npz"
        output_files: {"extracted_npz": "/path/to/extracted.npz"}
    """
```

### Step 2 Interface
```python
def generate_skeleton(model_name: str, gender: str, extracted_file: str) -> tuple[bool, str, dict]:
    """
    Args:
        model_name: ãƒ¢ãƒ‡ãƒ«å
        gender: "neutral|male|female"
        extracted_file: æŠ½å‡ºæ¸ˆã¿ãƒ¡ãƒƒã‚·ãƒ¥ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹
    
    Returns:
        success: True/False
        logs: "ã‚¹ã‚±ãƒ«ãƒˆãƒ³ç”Ÿæˆå®Œäº†: /path/to/skeleton.fbx"
        output_files: {
            "skeleton_fbx": "/path/to/skeleton.fbx",
            "skeleton_npz": "/path/to/skeleton.npz"
        }
    """
```

### Step 3 Interface
```python
def apply_skinning(model_name: str, mesh_file: str, skeleton_file: str) -> tuple[bool, str, dict]:
    """
    Args:
        model_name: ãƒ¢ãƒ‡ãƒ«å
        mesh_file: ãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹
        skeleton_file: ã‚¹ã‚±ãƒ«ãƒˆãƒ³FBXãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹
    
    Returns:
        success: True/False
        logs: "ã‚¹ã‚­ãƒ‹ãƒ³ã‚°é©ç”¨å®Œäº†: /path/to/skinned.fbx"
        output_files: {
            "skinned_fbx": "/path/to/skinned.fbx",
            "skinning_npz": "/path/to/skinning.npz"
        }
    """
```

### Step 4 Interface
```python
def merge_textures(model_name: str, skinned_file: str, original_file: str) -> tuple[bool, str, dict]:
    """
    Args:
        model_name: ãƒ¢ãƒ‡ãƒ«å
        skinned_file: ãƒªã‚®ãƒ³ã‚°æ¸ˆã¿FBXãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹
        original_file: ã‚ªãƒªã‚¸ãƒŠãƒ«ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹
    
    Returns:
        success: True/False
        logs: "ãƒ†ã‚¯ã‚¹ãƒãƒ£çµ±åˆå®Œäº†: /path/to/final.fbx"
        output_files: {"final_fbx": "/path/to/final.fbx"}
    """
```

## ğŸš€ å®Ÿè£…æ‰‹é †

### 1. app.py ã®å®Ÿè£… (æ—¢ã«å®Œæˆ)
```python
# app.py - UI ã¨ãƒ‡ãƒ¼ã‚¿å—ã‘æ¸¡ã—ã®ã¿
def process_complete_pipeline(input_file, gender):
    # Step 1: ãƒ¡ãƒƒã‚·ãƒ¥æŠ½å‡º
    success, logs, files = extract_mesh(input_file, model_name)
    
    # Step 2: ã‚¹ã‚±ãƒ«ãƒˆãƒ³ç”Ÿæˆ  
    success, logs, files = generate_skeleton(model_name, gender, files["extracted_npz"])
    
    # Step 3: ã‚¹ã‚­ãƒ‹ãƒ³ã‚°é©ç”¨
    success, logs, files = apply_skinning(model_name, extracted_file, skeleton_file)
    
    # Step 4: ãƒ†ã‚¯ã‚¹ãƒãƒ£çµ±åˆ
    success, logs, files = merge_textures(model_name, skinned_file, original_file)
```

### 2. Step Module å®Ÿè£…ä¾‹
```python
# step_modules/step1_extract.py
def extract_mesh(input_file: str, model_name: str) -> tuple[bool, str, dict]:
    """ç‹¬ç«‹ã—ãŸãƒ¡ãƒƒã‚·ãƒ¥æŠ½å‡ºæ©Ÿèƒ½"""
    try:
        # å®Ÿéš›ã®ãƒ¡ãƒƒã‚·ãƒ¥æŠ½å‡ºå‡¦ç†
        # ã“ã“ã«æ—¢å­˜ã® extract.py ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç§»æ¤
        
        output_path = f"/app/pipeline_work/01_extracted_mesh/{model_name}_extracted.npz"
        
        # å‡¦ç†å®Ÿè¡Œï¼ˆä»–ã®ç’°å¢ƒã‚’æ±šã•ãªã„ï¼‰
        # ...
        
        return True, f"ãƒ¡ãƒƒã‚·ãƒ¥æŠ½å‡ºå®Œäº†: {output_path}", {"extracted_npz": output_path}
        
    except Exception as e:
        return False, f"ãƒ¡ãƒƒã‚·ãƒ¥æŠ½å‡ºã‚¨ãƒ©ãƒ¼: {e}", {}
```

### 3. app.py ã§ã® Module å‘¼ã³å‡ºã—å®Ÿè£…
```python
# app.py
from step_modules.step1_extract import extract_mesh
from step_modules.step2_skeleton import generate_skeleton
from step_modules.step3_skinning import apply_skinning
from step_modules.step4_texture import merge_textures

def call_microservice_step1(input_file: str, model_name: str):
    """Step1 Module ã‚’ç›´æ¥å‘¼ã³å‡ºã—"""
    return extract_mesh(input_file, model_name)

def call_microservice_step2(model_name: str, gender: str):
    """Step2 Module ã‚’ç›´æ¥å‘¼ã³å‡ºã—"""
    extracted_file = f"/app/pipeline_work/01_extracted_mesh/{model_name}_extracted.npz"
    return generate_skeleton(model_name, gender, extracted_file)
```

## ğŸ”§ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
/app/
â”œâ”€â”€ app.py                    # UI + ãƒ‡ãƒ¼ã‚¿å—ã‘æ¸¡ã—
â”œâ”€â”€ step_modules/             # ç‹¬ç«‹å®Ÿè¡Œæ©Ÿèƒ½ç¾¤
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ step1_extract.py     # ãƒ¡ãƒƒã‚·ãƒ¥æŠ½å‡ºãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ step2_skeleton.py    # ã‚¹ã‚±ãƒ«ãƒˆãƒ³ç”Ÿæˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ step3_skinning.py    # ã‚¹ã‚­ãƒ‹ãƒ³ã‚°é©ç”¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â””â”€â”€ step4_texture.py     # ãƒ†ã‚¯ã‚¹ãƒãƒ£çµ±åˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”œâ”€â”€ pipeline_work/           # ãƒ‡ãƒ¼ã‚¿ä¿å­˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
â”‚   â”œâ”€â”€ 01_extracted_mesh/
â”‚   â”œâ”€â”€ 02_skeleton/
â”‚   â”œâ”€â”€ 03_skinning/
â”‚   â””â”€â”€ 04_merge/
â””â”€â”€ src/                     # æ—¢å­˜ã®UniRigã‚³ã‚¢æ©Ÿèƒ½
    â”œâ”€â”€ data/extract.py      # Step1ã§ä½¿ç”¨
    â”œâ”€â”€ inference/           # Step2, Step3ã§ä½¿ç”¨
    â””â”€â”€ ...
```

## ğŸ“‹ ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åŒ–ã®åˆ©ç‚¹

### âœ… ç‹¬ç«‹æ€§
- å„ã‚¹ãƒ†ãƒƒãƒ—ãŒç‹¬ç«‹ã—ã¦å®Ÿè¡Œå¯èƒ½
- ä»–ã‚¹ãƒ†ãƒƒãƒ—ã®å®Ÿè¡Œç’°å¢ƒã‚’æ±šã•ãªã„
- ã‚¨ãƒ©ãƒ¼ãŒä»–ã‚¹ãƒ†ãƒƒãƒ—ã«æ³¢åŠã—ãªã„

### âœ… ä¿å®ˆæ€§
- å„ã‚¹ãƒ†ãƒƒãƒ—ã®ä¿®æ­£ãŒä»–ã«å½±éŸ¿ã—ãªã„
- ãƒ†ã‚¹ãƒˆãŒå®¹æ˜“ï¼ˆå˜ä½“ãƒ†ã‚¹ãƒˆå¯èƒ½ï¼‰
- ãƒ‡ãƒãƒƒã‚°ãŒç°¡å˜

### âœ… æ‹¡å¼µæ€§  
- æ–°ã—ã„ã‚¹ãƒ†ãƒƒãƒ—ã®è¿½åŠ ãŒå®¹æ˜“
- æ—¢å­˜ã‚¹ãƒ†ãƒƒãƒ—ã®æ”¹è‰¯ãŒå®‰å…¨
- ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´ãŒç‹¬ç«‹

### âœ… å†åˆ©ç”¨æ€§
- å„ã‚¹ãƒ†ãƒƒãƒ—ã‚’å€‹åˆ¥ã«å‘¼ã³å‡ºã—å¯èƒ½
- æ®µéšçš„å®Ÿè¡ŒãŒå¯èƒ½
- ãƒãƒƒãƒå‡¦ç†ã¸ã®å¿œç”¨ãŒå®¹æ˜“

## ğŸ“Š ç›£è¦–ãƒ»ãƒ­ã‚°

### ãƒ­ã‚°æ§‹é€ 
```json
{
  "timestamp": "2025-01-03T10:00:00Z",
  "service": "frontend",
  "level": "INFO", 
  "message": "API call to step1 service",
  "request_id": "uuid",
  "user_id": "optional",
  "model_name": "bird",
  "processing_time": 1.5,
  "status": "success"
}
```

### ãƒ¡ãƒˆãƒªã‚¯ã‚¹
- ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°/ç§’
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“
- ã‚¨ãƒ©ãƒ¼ç‡
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåˆ†å¸ƒ
- å‡¦ç†æˆåŠŸç‡

## ğŸš§ æ¬¡ã®é–‹ç™ºã‚¹ãƒ†ãƒƒãƒ—

1. **Step 1 ã‚µãƒ¼ãƒ“ã‚¹å®Ÿè£…**: ãƒ¡ãƒƒã‚·ãƒ¥æŠ½å‡ºãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹
2. **Step 2 ã‚µãƒ¼ãƒ“ã‚¹å®Ÿè£…**: ã‚¹ã‚±ãƒ«ãƒˆãƒ³ç”Ÿæˆãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹  
3. **Step 3 ã‚µãƒ¼ãƒ“ã‚¹å®Ÿè£…**: ã‚¹ã‚­ãƒ‹ãƒ³ã‚°ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹
4. **Step 4 ã‚µãƒ¼ãƒ“ã‚¹å®Ÿè£…**: ãƒ†ã‚¯ã‚¹ãƒãƒ£çµ±åˆãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹
5. **èªè¨¼ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: APIèªè¨¼ã¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
6. **ç›£è¦–ãƒ»ãƒ­ã‚°**: å„ã‚µãƒ¼ãƒ“ã‚¹ã®ç›£è¦–ã¨ãƒ­ã‚°é›†ç´„
7. **è² è·åˆ†æ•£**: ã‚µãƒ¼ãƒ“ã‚¹é–“ã®è² è·åˆ†æ•£è¨­å®š
8. **CI/CD**: è‡ªå‹•ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
